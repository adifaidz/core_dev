* auto generera en svn checkout .zip fil från svn

	KRÄVER att man först gör en initial checkout av repositoriet, godkänn permanent ssl certifikat:
	svn co https://127.0.0.1/svn/martin/webroot /home/martin/dev/webroot-svn

	kör följande script varje dygn:
	svn update /home/martin/dev/webroot-svn

---
* packa ihop hela eller en viss del av den, skippa .svn kataloger (skippa osynliga)

	plocka ut revisions-numret med:
	svnversion /home/martin/dev/webroot-svn

	bra generellt version-detect-script: http://svn.gnucash.org/trac/browser/gnucash/trunk/util/gnc-svnversion
	
 	cd /home/martin/dev
 	zip -9r /home/martin/dev/core_dev-r`svnversion webroot-svn`.zip /home/martin/dev/webroot-svn/core_dev -x "*.svn/*"

	generates /home/martin/dev/core_dev-r3200.zip

	TODO relativ sökväg! inte absolut
	http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html
---[backup-core_dev.sh]---

#!/bin/sh

REPO=martin-svn
PROJ=krust

cd /home/martin/dev
svn update $REPO

# check if current ver is same as .lastver
svnversion $REPO > backup-krust.currver
cmp -s backup-$PROJ.lastver backup-$PROJ.currver
if [ "$?" = "0" ]; then
        echo no change made. exiting
        exit 0
fi

zip -9r krust-ui-r`svnversion $REPO`.zip martin-svn/EQ/UIFiles/krust/ -x "*.svn/*"
zip -9r krust_no_mq-ui-r`svnversion $REPO`.zip martin-svn/EQ/UIFiles/krust_no_mq/ -x "*.svn/*"
./upload-startwars.kermit nofuture.se/krust/svn krust-ui-r`svnversion $REPO`.zip krust_no_mq-ui-r`svnversion $REPO`.zip

mv backup-$PROJ.currver backup-$PROJ.lastver





----
* auto ladda upp den till startwars.org/krust/svn

	kermit guide http://www.columbia.edu/kermit/ftpscripts.html
	kermit info  http://www.columbia.edu/kermit/ftpclient.html

	sudo aptitude install ckermit

	istället för att använda inbyggda kommandot, använd kermit. kermit stödjer fler olika protokoll än ftp

	här är komplett kermit script för att göra en upload:
---[upload-krust.kermit]---
#!/usr/bin/kermit +
if < \v(argc) 2 exit 1 Usage: \%0 file
ftp open nofuture.se /user:xxx /password:yyy
if fail exit 1 Connection failed
if not \v(ftp_loggedin) exit 1 Login failed
ftp cd nofuture.se
if fail exit 1 ftp cd failed: \v(ftp_message)
ftp cd krust
if fail exit 1 ftp cd failed: \v(ftp_message)
ftp cd svn
if fail exit 1 ftp cd failed: \v(ftp_message)
cd /home/martin/dev
ftp put /delete \%1
if fail exit 1 ftp put \%1: \v(ftp_message)
ftp bye
exit
---[end of script]---


TODO skriv repository version till fil efter ftp upload. gör inte ny upload om ingen ny repo har arkiverats