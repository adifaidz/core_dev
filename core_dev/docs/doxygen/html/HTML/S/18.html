<html>
<head>
<title>functions_image.php</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-4.8.6'>
</head>
<body>
<a name='TOP'><h2><a href='../mains.html'>root</a>/functions_image.php</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L8'>[^]</a>[v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L8' title='Defined at 8.'>pngCenterText</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 &lt;?
<a name='L2'>   2 <i><font color='green'>/*</font></i>
<a name='L3'>   3 <i><font color='green'>        functions_image.php - image handling helper functions</font></i>
<a name='L4'>   4 <i><font color='green'>*/</font></i>
<a name='L5'>   5 
<a name='L6'>   6         <i><font color='green'>/* draws $str array centered horizontally &amp; vertically, returns image resource */</font></i>
<a name='L7'>   7         <i><font color='green'>//use $font to specify one of GD's internal fonts, or specify a filename to load a .gdf or .ttf instead</font></i>
<a name='L8'>   8         <b>function</b> pngCenterText($<a href='../Y/590.html' title='Multiple used in 46 places.'>str</a>, $<a href='../Y/619.html' title='Multiple used in 2 places.'>template</a>, $<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a> = 1, $<a href='../Y/138.html' title='Multiple used in 3 places.'>col</a> = <b>array</b>() )
<a name='L9'>   9         <font color='blue'>{</font>
<a name='L10'>  10                 $<a href='../Y/652.html' title='Multiple used in 4 places.'>ttf_angle</a> = 0;
<a name='L11'>  11                 $<a href='../Y/653.html' title='Multiple used in 4 places.'>ttf_size</a> = 12;
<a name='L12'>  12 
<a name='L13'>  13                 $<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a> = <a href='../Y/289.html' title='Multiple used in 3 places.'>imagecreatefrompng</a>($<a href='../Y/619.html' title='Multiple used in 2 places.'>template</a>);
<a name='L14'>  14 
<a name='L15'>  15                 <b>if</b> (<b>empty</b>($<a href='../Y/138.html' title='Multiple used in 3 places.'>col</a>)) <font color='blue'>{</font>
<a name='L16'>  16                         $<a href='../Y/140.html' title='Multiple used in 4 places.'>color</a> = <a href='../Y/283.html' title='Multiple used in 2 places.'>imagecolorallocate</a>($<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>, 0, 0, 0); <i><font color='green'>//default to black</font></i>
<a name='L17'>  17                 <font color='blue'>}</font> <b>else</b> <font color='blue'>{</font>
<a name='L18'>  18                         $<a href='../Y/140.html' title='Multiple used in 4 places.'>color</a> = <a href='../Y/283.html' title='Multiple used in 2 places.'>imagecolorallocate</a>($<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>, $<a href='../Y/138.html' title='Multiple used in 3 places.'>col</a>[0], $<a href='../Y/138.html' title='Multiple used in 3 places.'>col</a>[1], $<a href='../Y/138.html' title='Multiple used in 3 places.'>col</a>[2]);
<a name='L19'>  19                 <font color='blue'>}</font>
<a name='L20'>  20 
<a name='L21'>  21                 $<a href='../Y/651.html' title='Multiple used in 5 places.'>ttf</a> = <b>false</b>;
<a name='L22'>  22                 <b>if</b> (!<a href='../Y/324.html' title='Multiple used in 225 places.'>is_numeric</a>($<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>)) <font color='blue'>{</font>
<a name='L23'>  23                         <b>if</b> (<a href='../Y/609.html' title='Multiple used in 62 places.'>substr</a>(<a href='../Y/601.html' title='Multiple used in 4 places.'>strtolower</a>($<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>), -4) == '.ttf') <font color='blue'>{</font>
<a name='L24'>  24                                 $<a href='../Y/651.html' title='Multiple used in 5 places.'>ttf</a> = <b>true</b>;
<a name='L25'>  25 
<a name='L26'>  26                                 $<a href='../Y/227.html' title='Multiple used in 4 places.'>fh</a> = 0;
<a name='L27'>  27                                 <b>foreach</b> ($<a href='../Y/590.html' title='Multiple used in 46 places.'>str</a> <b>as</b> $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>)
<a name='L28'>  28                                 <font color='blue'>{</font>
<a name='L29'>  29                                         $<a href='../Y/696.html' title='Multiple used in 9 places.'>x</a> = <a href='../Y/307.html' title='Multiple used in 2 places.'>imagettfbbox</a>($<a href='../Y/653.html' title='Multiple used in 4 places.'>ttf_size</a>, $<a href='../Y/652.html' title='Multiple used in 4 places.'>ttf_angle</a>, $<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>, $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>);
<a name='L30'>  30                                         $<a href='../Y/612.html' title='Multiple used in 2 places.'>t</a> = $<a href='../Y/696.html' title='Multiple used in 9 places.'>x</a>[1] - $<a href='../Y/696.html' title='Multiple used in 9 places.'>x</a>[7];
<a name='L31'>  31                                         <b>if</b> ($<a href='../Y/612.html' title='Multiple used in 2 places.'>t</a> &gt; $<a href='../Y/227.html' title='Multiple used in 4 places.'>fh</a>) $<a href='../Y/227.html' title='Multiple used in 4 places.'>fh</a> = $<a href='../Y/612.html' title='Multiple used in 2 places.'>t</a>;
<a name='L32'>  32                                 <font color='blue'>}</font>
<a name='L33'>  33 
<a name='L34'>  34                         <font color='blue'>}</font> <b>else</b> <font color='blue'>{</font>
<a name='L35'>  35                                 <i><font color='green'>//GDF font handling</font></i>
<a name='L36'>  36                                 $<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a> = <a href='../S/18.html#L36' title='Used at 36 in functions_image.php.'>imageloadfont</a>($<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>);
<a name='L37'>  37                         <font color='blue'>}</font>
<a name='L38'>  38                 <font color='blue'>}</font>
<a name='L39'>  39                 
<a name='L40'>  40                 <b>if</b> (!$<a href='../Y/651.html' title='Multiple used in 5 places.'>ttf</a>) <font color='blue'>{</font>
<a name='L41'>  41                         $<a href='../Y/227.html' title='Multiple used in 4 places.'>fh</a> = <a href='../S/18.html#L41' title='Used at 41 in functions_image.php.'>imagefontheight</a>($<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>);
<a name='L42'>  42                 <font color='blue'>}</font>
<a name='L43'>  43 
<a name='L44'>  44                 <i><font color='green'>/*</font></i>
<a name='L45'>  45 <i><font color='green'>                        prints the text in $str array centered vertically &amp; horizontally over the image</font></i>
<a name='L46'>  46 <i><font color='green'>                */</font></i>
<a name='L47'>  47                 $<a href='../Y/277.html' title='Multiple used in 92 places.'>i</a> = 0;
<a name='L48'>  48                 <b>foreach</b> ($<a href='../Y/590.html' title='Multiple used in 46 places.'>str</a> <b>as</b> $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>)
<a name='L49'>  49                 <font color='blue'>{</font>
<a name='L50'>  50                         <b>if</b> (!$<a href='../Y/651.html' title='Multiple used in 5 places.'>ttf</a>) <font color='blue'>{</font>
<a name='L51'>  51                                 $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a> = <a href='../S/18.html#L51' title='Used at 51 in functions_image.php.'>mb_convert_encoding</a>($<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>, 'ISO-8859-1', 'auto'); <i><font color='green'>//FIXME required with php 5.2, as imagestring() cant handle utf8</font></i>
<a name='L52'>  52                                 $<a href='../Y/260.html' title='Multiple used in 3 places.'>fw</a> = <a href='../Y/597.html' title='Multiple used in 24 places.'>strlen</a>($<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>) * <a href='../S/18.html#L52' title='Used at 52 in functions_image.php.'>imagefontwidth</a>($<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>);
<a name='L53'>  53                         <font color='blue'>}</font> <b>else</b> <font color='blue'>{</font>
<a name='L54'>  54                                 $<a href='../Y/696.html' title='Multiple used in 9 places.'>x</a> = <a href='../Y/307.html' title='Multiple used in 2 places.'>imagettfbbox</a>($<a href='../Y/653.html' title='Multiple used in 4 places.'>ttf_size</a>, $<a href='../Y/652.html' title='Multiple used in 4 places.'>ttf_angle</a>, $<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>, $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>);
<a name='L55'>  55                                 $<a href='../Y/260.html' title='Multiple used in 3 places.'>fw</a> = $<a href='../Y/696.html' title='Multiple used in 9 places.'>x</a>[2] - $<a href='../Y/696.html' title='Multiple used in 9 places.'>x</a>[0];    <i><font color='green'>//font width</font></i>
<a name='L56'>  56                         <font color='blue'>}</font>
<a name='L57'>  57 
<a name='L58'>  58                         $<a href='../Y/503.html' title='Multiple used in 3 places.'>px</a> = (<a href='../S/18.html#L58' title='Used at 58 in functions_image.php.'>imagesx</a>($<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>) / 2) - ($<a href='../Y/260.html' title='Multiple used in 3 places.'>fw</a> / 2);
<a name='L59'>  59                         $<a href='../Y/504.html' title='Multiple used in 3 places.'>py</a> = (<a href='../S/18.html#L59' title='Used at 59 in functions_image.php.'>imagesy</a>($<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>) / 2) - ( ((<a href='../Y/151.html' title='Multiple used in 53 places.'>count</a>($<a href='../Y/590.html' title='Multiple used in 46 places.'>str</a>)/2) - $<a href='../Y/277.html' title='Multiple used in 92 places.'>i</a>) * $<a href='../Y/227.html' title='Multiple used in 4 places.'>fh</a>);
<a name='L60'>  60 
<a name='L61'>  61                         <b>if</b> (!$<a href='../Y/651.html' title='Multiple used in 5 places.'>ttf</a>) <font color='blue'>{</font>
<a name='L62'>  62                                 <a href='../S/18.html#L62' title='Used at 62 in functions_image.php.'>imagestring</a>($<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>, $<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>, $<a href='../Y/503.html' title='Multiple used in 3 places.'>px</a>, $<a href='../Y/504.html' title='Multiple used in 3 places.'>py</a>, $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>, $<a href='../Y/140.html' title='Multiple used in 4 places.'>color</a>);
<a name='L63'>  63                         <font color='blue'>}</font> <b>else</b> <font color='blue'>{</font>
<a name='L64'>  64                                 <a href='../S/18.html#L64' title='Used at 64 in functions_image.php.'>imagettftext</a>($<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>, $<a href='../Y/653.html' title='Multiple used in 4 places.'>ttf_size</a>, $<a href='../Y/652.html' title='Multiple used in 4 places.'>ttf_angle</a>, $<a href='../Y/503.html' title='Multiple used in 3 places.'>px</a>, $<a href='../Y/504.html' title='Multiple used in 3 places.'>py</a>, $<a href='../Y/140.html' title='Multiple used in 4 places.'>color</a>, $<a href='../Y/253.html' title='Multiple used in 10 places.'>font</a>, $<a href='../Y/654.html' title='Multiple used in 8 places.'>txt</a>);
<a name='L65'>  65                         <font color='blue'>}</font>
<a name='L66'>  66 
<a name='L67'>  67                         $<a href='../Y/277.html' title='Multiple used in 92 places.'>i</a>++;
<a name='L68'>  68                 <font color='blue'>}</font>
<a name='L69'>  69                 <b>return</b> $<a href='../Y/281.html' title='Multiple used in 8 places.'>im</a>;
<a name='L70'>  70         <font color='blue'>}</font>
<a name='L71'>  71 
<a name='L72'>  72 ?&gt;
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^]<a href='#L8'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
