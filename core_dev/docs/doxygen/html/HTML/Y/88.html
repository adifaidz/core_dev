<html>
<head>
<title>FileData</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-4.8.6'>
</head>
<body>
<pre>
<a href='../S/4.html#L451'>FileData</a>          451 class.Files.php 	function handleUpload($FileData, $fileType, $ownerId, $categoryId = 0)
<a href='../S/4.html#L457'>FileData</a>          457 class.Files.php 		if (!$FileData['name']) return;
<a href='../S/4.html#L459'>FileData</a>          459 class.Files.php 		if (!is_uploaded_file($FileData['tmp_name'])) {
<a href='../S/4.html#L465'>FileData</a>          465 class.Files.php 		$fileId = $this-&gt;addFileEntry($fileType, $categoryId, $ownerId, $FileData['name']);
<a href='../S/4.html#L468'>FileData</a>          468 class.Files.php 		if (in_array($FileData['type'], $this-&gt;image_mime_types)) {
<a href='../S/4.html#L469'>FileData</a>          469 class.Files.php 			$this-&gt;handleImageUpload($fileId, $FileData);
<a href='../S/4.html#L470'>FileData</a>          470 class.Files.php 		} else if (in_array($FileData['type'], $this-&gt;audio_mime_types)) {
<a href='../S/4.html#L471'>FileData</a>          471 class.Files.php 			$this-&gt;handleGeneralUpload($fileId, $FileData);
<a href='../S/4.html#L473'>FileData</a>          473 class.Files.php 			$this-&gt;handleGeneralUpload($fileId, $FileData);
<a href='../S/4.html#L508'>FileData</a>          508 class.Files.php 	function handleGeneralUpload($fileId, $FileData)
<a href='../S/4.html#L512'>FileData</a>          512 class.Files.php 		switch ($FileData['type']) {
<a href='../S/4.html#L516'>FileData</a>          516 class.Files.php 				$check = $this-&gt;convertImage($FileData['tmp_name'], $out_tempfile, 'image/jpeg');
<a href='../S/4.html#L522'>FileData</a>          522 class.Files.php 				unlink($FileData['tmp_name']);
<a href='../S/4.html#L523'>FileData</a>          523 class.Files.php 				rename($out_tempfile, $FileData['tmp_name']);
<a href='../S/4.html#L524'>FileData</a>          524 class.Files.php 				$filesize = filesize($FileData['tmp_name']);
<a href='../S/4.html#L525'>FileData</a>          525 class.Files.php 				$q = 'UPDATE tblFiles SET fileMime="image/jpeg", fileName="'.$db-&gt;escape(basename(strip_tags($FileData['name']))).'.jpg",fileSize='.$filesize.' WHERE fileId='.$fileId;
<a href='../S/4.html#L527'>FileData</a>          527 class.Files.php 				$this-&gt;handleImageUpload($fileId, $FileData);
<a href='../S/4.html#L535'>FileData</a>          535 class.Files.php 				$check = $this-&gt;convertImage($FileData['tmp_name'], $out_tempfile, 'image/png');
<a href='../S/4.html#L542'>FileData</a>          542 class.Files.php 				unlink($FileData['tmp_name']);
<a href='../S/4.html#L543'>FileData</a>          543 class.Files.php 				rename($out_tempfile, $FileData['tmp_name']);
<a href='../S/4.html#L544'>FileData</a>          544 class.Files.php 				$filesize = filesize($FileData['tmp_name']);
<a href='../S/4.html#L545'>FileData</a>          545 class.Files.php 				$q = 'UPDATE tblFiles SET fileMime="image/png", fileName="'.$db-&gt;escape(basename(strip_tags($FileData['name']))).'.png",fileSize='.$filesize.' WHERE fileId='.$fileId;
<a href='../S/4.html#L547'>FileData</a>          547 class.Files.php 				$this-&gt;handleImageUpload($fileId, $FileData);
<a href='../S/4.html#L553'>FileData</a>          553 class.Files.php 		if (move_uploaded_file($FileData['tmp_name'], $uploadfile)) {
<a href='../S/4.html#L557'>FileData</a>          557 class.Files.php 		$session-&gt;log('Failed to move file from '.$FileData['tmp_name'].' to '.$uploadfile);
<a href='../S/4.html#L562'>FileData</a>          562 class.Files.php 	function handleImageUpload($fileId, $FileData)
<a href='../S/4.html#L566'>FileData</a>          566 class.Files.php 		list($img_width, $img_height) = getimagesize($FileData['tmp_name']);
<a href='../S/4.html#L571'>FileData</a>          571 class.Files.php 			$this-&gt;resizeImage($FileData['tmp_name'], $FileData['tmp_name'], $this-&gt;image_max_width, $this-&gt;image_max_height, $fileId);
<a href='../S/4.html#L576'>FileData</a>          576 class.Files.php 		$this-&gt;resizeImage($FileData['tmp_name'], $thumb_filename, $this-&gt;thumb_default_width, $this-&gt;thumb_default_height);
<a href='../S/4.html#L580'>FileData</a>          580 class.Files.php 		if (move_uploaded_file($FileData['tmp_name'], $uploadfile)) return $fileId;
<a href='../S/4.html#L581'>FileData</a>          581 class.Files.php 		$session-&gt;log('Failed to move file from '.$FileData['tmp_name'].' to '.$uploadfile);
</pre>
</body>
</html>
